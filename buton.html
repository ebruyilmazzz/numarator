<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <title>Kiosk</title>
    <style>
        body {
            font-family: Arial, sans-serif;
        }
        .container {
            text-align: center;
            margin-top: 100px;
        }

        select, button {
            font-size: 24px;
            padding: 10px 30px;
            margin: 10px;
        }

        #result {
            font-size: 48px;
            font-weight: bold;
            color: #333;
            margin-top: 40px;
            text-align: center;
        }

        @media print {
            body * {
                visibility: hidden;
            }
            #result {
                visibility: visible;
                position: absolute;
                top: 200px;
                left: 0;
                right: 0;
                text-align: center;
                font-size: 64px;
                font-weight: bold;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Sıra Alma Kiosku</h1>

        <label for="masa_tipi" style="font-size: 24px;">Masa Seçin:</label><br>
        <select id="masa_tipi">
            <option value="hasar">Hasar</option>
            <option value="mekanik">Mekanik</option>
            <option value="onarim">Onarim</option>
        </select><br>

        <button onclick="siraAl(document.getElementById('masa_tipi').value)">Sıra Al</button>

        <div id="sonuc"></div>
        <div id="result"></div>
    </div>

    
    <script>
     function createTicket() {
      const tip = document.getElementById('masa_tipi').value;
      siraAl(tip);
  }

  function siraAl(tip) {
      fetch('create_ticket.php', {
          method: 'POST',
          headers: { 'Content-Type': 'application/x-www-form-urlencoded' },
          body: new URLSearchParams({ masa_tipi: tip })
      })
      .then(res => res.json())
      .then(data => {
          console.log('Alınan sıra:', data);
          document.getElementById('result').textContent = 'Sıra Numaranız: ' + data.number;
          window.print();
      })
      .catch(err => {
          console.error('Hata:', err);
          alert('Bir hata oluştu.');
      });
  }
    </script>
</body>
</html>
